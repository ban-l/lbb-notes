# REST

REST（Representational State Transfer，表述性状态转移）是一种**软件架构风格**，而不是标准或协议。

它由Roy Fielding在2000年的博士论文中提出，用于指导网络应用软件的设计和开发，特别适合**分布式超媒体系统**（如Web应用）。

## 核心概念
REST的核心思想是将网络上的所有事物抽象为**资源**，每个资源通过**统一的接口**进行访问和管理。其关键原则包括：

1. **资源（Resource）**
   - 所有数据或服务都被抽象为资源（如用户、订单），每个资源有唯一的标识符（URI）。
   - 示例：`https://api.example.com/users/123`

2. **统一接口（Uniform Interface）**
   - 使用标准的HTTP方法操作资源：
     - `GET`：获取资源
     - `POST`：创建资源
     - `PUT`：更新资源
     - `DELETE`：删除资源
     - `PATCH`：部分更新资源
   - 资源的表现层与客户端分离（如JSON、XML格式）。

3. **无状态（Stateless）**
   - 每个请求必须包含处理所需的所有信息，服务器不保存客户端会话状态。
   - 优点：可扩展性高，减轻服务器负担。

4. **可缓存（Cacheable）**
   - 响应应明确是否可缓存，以提高性能（如HTTP缓存控制）。

5. **分层系统（Layered System）**
   - 客户端无需了解是否直接连接服务器，中间层（如负载均衡、代理）可透明扩展系统。

6. **按需代码（Code-On-Demand，可选）**
   - 服务器可临时向客户端发送可执行代码（如JavaScript），扩展客户端功能。

---

## 实际示例：用户管理API
假设一个用户管理服务，RESTful API设计如下：

| 操作         | HTTP方法 | 端点（URI）   | 描述             |
| ------------ | -------- | ------------- | ---------------- |
| 获取用户列表 | GET      | `/users`      | 返回所有用户     |
| 创建用户     | POST     | `/users`      | 添加新用户       |
| 获取单个用户 | GET      | `/users/{id}` | 返回指定ID的用户 |
| 更新用户     | PUT      | `/users/{id}` | 替换整个用户信息 |
| 删除用户     | DELETE   | `/users/{id}` | 删除指定用户     |

**请求示例（GET /users/123）**：
```http
GET /users/123 HTTP/1.1
Host: api.example.com
```

**响应示例（JSON）**：
```json
{
  "id": 123,
  "name": "张三",
  "email": "zhangsan@example.com"
}
```

---

### 优点与局限
**优点**：
- **简单性**：基于HTTP标准，易于理解和使用。
- **可扩展性**：无状态设计支持水平扩展。
- **松耦合**：客户端与服务器独立演化。

**局限**：
- 不适合实时通信（需WebSocket等）。
- 过度操作可能引发性能问题（如多次请求）。

---

## RESTful vs. 非RESTful对比
| 特性                            | RESTful API            | 非RESTful API（传统RPC风格） |
| ------------------------------- | ---------------------- | ---------------------------- |
| 接口设计                        | 资源导向，使用HTTP方法 | 动作导向，如`/getUser`       |
| 状态管理                        | 无状态                 | 可能依赖会话状态             |
| 数据格式     JSON/XML等标准格式 | 可能自定义格式         |                              |

### 总结
REST风格通过**资源抽象**和**统一接口**，提供了一种简洁、可扩展的Web服务设计范式。尽管存在局限性，它仍是当前API设计的主流实践，并衍生出更严格的规范（如HATEOAS）。在实际开发中，遵循REST原则能提升系统的可维护性和互操作性。