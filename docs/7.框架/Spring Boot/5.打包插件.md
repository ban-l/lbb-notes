# 打包插件

## spring-boot-maven-plugin

spring-boot-maven-plugin提供打包或者运行应用程序的命令。

- spring-boot:run 运行SpringBoot应用程序；
- spring-boot:repackage 重新打包你的jar包或者是war包；
- spring-boot:start和spring-boot:stop 管理Spring Boot应用程序的生命周期；
- spring-boot:build-info 生成执行器可以使用的构造信息。

## 可执行 jar 和 普通 jar 文件

Spring Boot 项目打包成的 jar 是可执行 jar，可以直接通过 java -jar xxx.jar 命令运行。

可执行 jar 和 普通 jar 的结构不同，无法被其它项目引用。

- 普通 jar 包，解压后直接就是包名，包里是代码；
- Spring Boot  jar 解压后，代码在 `\BOOT-INF\classes`目录，因此无法被直接引用。
- 如果需要引用，可以在 pom.xml 文件中增加配置（`repackage` ），将项目打包成两个 jar ，一个可执行，一个可引用。

## `.jar` 和 `.jar.original`的区别

当运行 `mvn package` 命令时，Maven 会生成一个**可执行**的 `JAR`文件，可以直接在命令行上运行。

`repackage` 会**重新打包生成**`JAR` 文件，添加一个额外的层次结构，使得 `JAR` 文件可被直接执行。

可执行`JAR`文件名称与 `mvn package` 生成的原始`JAR`文件名称相同，而原始`JAR`文件被重命名为 `.original`。

- .`jar`: 可执行 JAR 文件，它包含了应用程序代码、所有依赖项以及一个特殊的启动脚本（`spring-boot-loader`）。
  - 这个文件可以直接在命令行上运行，例如 `java -jar your-app.jar`。
  - 它被称为“`fat JAR`”或“`uber JAR`”，因为它包含了所有必需的组件。

- `.jar.original:` 这是原始的 `JAR` 文件，仅包含应用程序代码和资源文件，但不包括依赖项。
  - 这个文件是在 `repackage` 目标执行之前生成的。
  - 如果在 `pom.xml` 中禁用了 `repackage` 目标，那么这个文件将是唯一生成的 `JAR` 文件。

总的来说，`.jar` 文件是用于**部署和运行**应用程序的主要文件，而 `.jar.original` 文件主要用于被其他模块**引用**。
